import{f as e,a2 as s,ad as j,e as x,t as m,aE as $,W as d,aD as k,aG as I,co as l,ag as _,m as n,bH as v,ab as C,ac as y,v as c,o as u,c2 as M,l as g,br as E}from"./index.c1cf46f4.js";import{b as G}from"./Folder.12b951e8.js";import{a as L,M as S}from"./Layout.157e7fb5.js";import{c as O,a as z}from"./useUtil.83019790.js";import{I as A}from"./ImageWithError.86edf168.js";import{O as F,g as H}from"./icon.6a6d3fc0.js";import{G as W}from"./GridItem.a4a07cac.js";import"./Paginator.3a447579.js";import"./index.494311a6.js";import"./index.ca51fd96.js";import"./api.4edf87d7.js";import"./LinkWithBase.c715b571.js";import"./Markdown.5b34994b.js";import"./index.000f8da4.js";import"./FolderTree.5ea77610.js";const P=t=>{const{isHide:r}=O();if(r(t.obj)||t.obj.type!==F.IMAGE)return null;const{setPathAs:a}=L(),b=e(j,{get color(){return s()},boxSize:"$12",get as(){return H(t.obj)}}),[h,i]=x(!1),f=m(()=>$()&&(h()||t.obj.selected)),{show:p}=G({id:1}),{rawLink:w}=z();return e(S.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},style:{"flex-grow":1},get children(){return e(d,{w:"$full",class:"image-item",p:"$1",spacing:"$1",rounded:"$lg",transition:"all 0.3s",border:"2px solid transparent",get _hover(){return{border:`2px solid ${s()}`}},onMouseEnter:()=>{i(!0),a(t.obj.name,t.obj.is_dir,!0)},onMouseLeave:()=>{i(!1)},onContextMenu:o=>{k(()=>{I(!1),l(t.index,!0,!0)}),p(o,{props:t.obj})},get children(){return e(_,{w:"$full",pos:"relative",get children(){return[e(n,{get when(){return f()},get children(){return e(v,{pos:"absolute",left:"$1",top:"$1",get checked(){return t.obj.selected},onChange:o=>{l(t.index,o.target.checked)}})}}),e(A,{h:"150px",w:"$full",objectFit:"cover",rounded:"$lg",shadow:"$md",get fallback(){return e(C,{size:"lg"})},fallbackErr:b,get src(){return w(t.obj)},loading:"lazy",onClick:()=>{y.emit("gallery",t.obj.name)}})]}})}})}})},te=()=>{const t=m(()=>e(M,{w:"$full",gap:"$1",templateColumns:"repeat(auto-fill, minmax(100px,1fr))",class:"image-folders",get children(){return e(c,{get each(){return u.objs.filter(r=>r.is_dir)},children:(r,a)=>e(W,{obj:r,get index(){return a()}})})}}));return e(d,{spacing:"$2",w:"$full",get children(){return[e(n,{get when(){return g.show_folder_in_image_view==="top"},get children(){return t()}}),e(E,{w:"$full",gap:"$1",flexWrap:"wrap",class:"image-images",get children(){return e(c,{get each(){return u.objs},children:(r,a)=>e(P,{obj:r,get index(){return a()}})})}}),e(n,{get when(){return g.show_folder_in_image_view==="bottom"},get children(){return t()}})]}})};export{te as default};
