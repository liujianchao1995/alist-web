import{u as j,a as z,_ as De,g as en,b as gt,o as k,p as Y,O as T,S as x,h as kt,c as An,n as B,d as O,s as pe,l as at,e as q,f as n,M as ne,i as re,j as X,k as oe,m as E,I as Ie,T as Pn,F as Fn,q as de,B as R,r as ae,t as he,v as _e,w as Rn,x as jn,y as Dn,z as ft,L as In,A as Ln,C as Vn,D as Bn,E as be,G as Ee,H as Te,J as Ne,K as tn,N as mt,P as pt,Q as Le,R as Ue,U as W,V as zn,W as ge,X as Hn,Y as Ae,Z as Nn,$ as Un,a0 as bt,a1 as qn,a2 as ke,a3 as Qe,a4 as wt,a5 as ue,a6 as nn,a7 as Wn,a8 as vt,a9 as K,aa as Kn,ab as Gn,ac as w,ad as yt,ae as Ve,af as Xe,ag as rn,ah as ie,ai as Jn,aj as Qn,ak as Xn,al as on,am as an,an as we,ao as sn,ap as Zn,aq as P,ar as A,as as qe,at as We,au as ln,av as cn,aw as Yn,ax as er,ay as tr,az as Ot,aA as un,aB as nr,aC as rr,aD as or,aE as ar,aF as ir,aG as sr,aH as Mt,aI as lr,aJ as cr,aK as ur,aL as dr,aM as G,aN as hr,aO as Be,aP as gr,aQ as Et,aR as fr,aS as mr,aT as pr,aU as br,aV as wr,aW as vr,aX as yr,aY as _r,aZ as Sr,a_ as Cr,a$ as $r,b0 as xr,b1 as Tt,b2 as kr,b3 as Or,b4 as Mr,b5 as Er,b6 as Tr,b7 as Ar,b8 as Pr,b9 as Fr,ba as Rr,bb as jr,bc as Dr,bd as Ir}from"./index.c1cf46f4.js";import{u as Lr,B as dn,a as hn,b as Vr,c as Br}from"./index.ca51fd96.js";import{M as gn}from"./Markdown.5b34994b.js";import{f as zr,a as fn,b as Hr,c as Nr,d as Ur,e as qr,g as Wr,h as Kr,i as Gr,j as Jr,k as Qr,l as Xr,o as Zr}from"./api.4edf87d7.js";import{u as Yr,g as eo,a as to,b as no}from"./useUtil.83019790.js";import{F as mn,C as ro,a as oo,B as ao,b as io,T as so,c as At}from"./index.494311a6.js";import{R as lo}from"./index.000f8da4.js";import{M as _t}from"./FolderTree.5ea77610.js";const co=(e,...t)=>{},it=new Map,uo=(e,t)=>{it.set(e,t)},pn=e=>{window.scroll({top:it.get(e)||0,behavior:"smooth"}),co("recoverScroll",e,it.get(e))};let Fe;function ho(e,t,r="replaceState"){let o=r==="location"?location.href:location.hash;if(!o.includes("?"))o=`${o}?${e}=${t}`;else if(!o.includes(e))o=`${o}&${e}=${t}`;else{const a=`(\\?|&|#)${e}([^&|^#]*)(&|$|#)`;o=o.replace(new RegExp(a),"$1"+e+"="+t+"$3")}r==="location"&&(location.href=o),r==="pushState"&&history.pushState({},"",o),r==="replaceState"&&history.replaceState({},"",o)}function Pt(e){for(var t=window.location.search.substring(1),r=t.split("&"),o=0;o<r.length;o++){var a=r[o].split("=");if(a[0]==e)return a[1]}return""}const Ze={};let J=1;const $i=()=>J,go=()=>{const e=en();J=1,e.type==="pagination"&&ho("page",1),console.log("resetGlobalPage",J)},H=()=>{const{pathname:e}=j(),[,t]=z(c=>zr(c,De())),r=en();r.type==="pagination"&&Pt("page")&&(J=parseInt(Pt("page")));const[,o]=z(c=>{const d={index:c==null?void 0:c.index,size:c==null?void 0:c.size};return fn(c==null?void 0:c.path,De(),d.index,d.size,c==null?void 0:c.force,new gt.CancelToken(function(b){Fe=b}))}),a=(c,d=!0,f=!1)=>{f&&(c=Y(e(),c)),d?Ze[c]=!0:delete Ze[c]};let i=!1;const s=(c,d,f)=>{Fe==null||Fe(),i=d!=null?d:!1,u(""),Ze[c]?h(c,J,void 0,void 0,f):l(c)},l=async c=>{T.setState(x.FetchingObj);const d=await t(c);kt(d,f=>{var b;T.setObj(f),T.setProvider(f.provider),f.is_dir?(a(c),h(c,J)):(T.setReadme(f.readme),T.setRelated((b=f.related)!=null?b:[]),T.setRawUrl(f.raw_url),T.setState(x.File))},u)},h=async(c,d,f,b=!1,p)=>{f||(f=r.size),f!==void 0&&r.type==="all"&&(f=void 0),J=d!=null?d:1,T.setState(b?x.FetchingMore:x.FetchingObjs);const S=await o({path:c,index:d,size:f,force:p});kt(S,_=>{var M;b?An(_.content):(T.setObjs((M=_.content)!=null?M:[]),T.setTotal(_.total)),T.setReadme(_.readme),T.setWrite(_.write),T.setProvider(_.provider),T.setState(x.Folder),b&&(d!=null?d:1)>1||pn(c)},u)},u=(c,d)=>{d===403?(T.setState(x.NeedPassword),i&&B.error(c)):T.setErr(c)},g=(c,d,f=!1)=>{h(e(),c,d,f)};return{handlePathChange:s,setPathAs:a,refresh:(c,d)=>{s(e(),c,d)},pageChange:g,loadMore:()=>{g(J+1,void 0,!0)},allLoaded:()=>J>=Math.ceil(k.total/r.size)}};function Re(e){return e==null||e===""}function fo(e){return e==null}async function mo(e,t){let r="/downloads/alist";const o=await gt.post(e,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.getGlobalOption",params:["token:"+t]});return console.log(o),o.status===200&&(Re(o.data.result.dir)||(r=o.data.result.dir),r=r.endsWith("/")?r.slice(0,-1):r),r}const po=()=>{const{rawLinks:e}=Yr(),t=O(),{pathname:r}=j();return{batchDownloadSelected:()=>{e(!0).forEach(a=>{window.open(a,"_blank")})},sendToAria2:async()=>{const o=pe(),a=async(l,h)=>{var u;if(h.is_dir){const g=await fn(Y(r(),l,h.name),De());if(g.code!==200)return g.message;const c=[];for(const d of(u=g.data.content)!=null?u:[]){const f=await a(Y(l,h.name),d);if(typeof f=="string")return f;c.push(...f)}return c}else return[{path:Y(l,h.name),dir:l,url:eo(Y(r(),l),h,"direct",!0),name:h.name}]},{aria2_rpc_url:i,aria2_rpc_secret:s}=at;if(!i){B.warning(t("home.toolbar.aria2_not_set"));return}try{let l="/downloads/alist";l=await mo(i,s);let h=!1;B.info(`${t("home.package_download.fetching_struct")}`);for(const u of o){const g=await a("",u);if(typeof g!="object"||g.length===void 0)return B.error(`${t("home.package_download.fetching_struct_failed")}: ${g}`),g;for(let c=0;c<g.length;c++){if(Re(g[c].path)||fo(g[c].dir)||Re(g[c].url)||Re(g[c].name)){B.error(`${t("home.package_download.fetching_struct_failed")}: ${JSON.stringify(g[c])}`);continue}h||(h=!0,B.info(`${t("home.package_download.downloading")}`));const d=await gt.post(i,{id:Math.random().toString(),jsonrpc:"2.0",method:"aria2.addUri",params:["token:"+s,[g[c].url],{out:g[c].name,dir:l+g[c].dir,"check-certificate":"false"}]});console.log(d)}}B.success(t("home.toolbar.send_aria2_success"))}catch(l){console.error(l),B.error(`failed to send to aria2: ${l}`)}}}},Ke=e=>{var i;const[t,r]=q((i=e.defaultValue)!=null?i:""),o=O(),a=()=>{var s;if(!t()){B.warning(o("global.empty_input"));return}(s=e.onSubmit)==null||s.call(e,t()),r("")};return n(ae,{blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},initialFocus:"#modal-input",get children(){return[n(ne,{}),n(re,{get children(){return[n(X,{get children(){return o(e.title)}}),n(oe,{get children(){return[n(E,{get when(){return e.topSlot},get children(){return e.topSlot}}),n(E,{get when(){return e.type==="text"},get fallback(){return n(Ie,{id:"modal-input",get type(){return e.type},get value(){return t()},onInput:s=>{r(s.currentTarget.value)},onKeyDown:s=>{s.key==="Enter"&&a()}})},get children(){return n(Pn,{id:"modal-input",get value(){return t()},onInput:s=>{r(s.currentTarget.value)}})}}),n(E,{get when(){return e.tips},get children(){return n(Fn,{get children(){return e.tips}})}})]}}),n(de,{display:"flex",gap:"$2",get children(){return[n(R,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return o("global.cancel")}}),n(R,{get loading(){return e.loading},onClick:()=>a(),get children(){return o("global.ok")}})]}})]}})]}})},bo=()=>{const{pathname:e}=j(),t=he(()=>["",...e().split("/").filter(Boolean)]),r=O(),{setPathAs:o}=H();return n(Bn,{class:"nav",w:"$full",get children(){return n(_e,{get each(){return t()},children:(a,i)=>{const s=he(()=>i()===t().length-1),l=t().slice(0,i()+1).join("/"),h=Rn(l);let u=()=>a;return u()===""&&(u=()=>be("home_icon")+r("manage.sidemenu.home")),n(jn,{class:"nav-item",get children(){return[n(Dn,{class:"nav-link",css:{wordBreak:"break-all"},color:"unset",get _hover(){return{bgColor:ft(),color:"unset"}},_active:{transform:"scale(.95)",transition:"0.1s"},cursor:"pointer",p:"$1",rounded:"$lg",get currentPage(){return s()},get as(){return s()?void 0:In},get href(){return Ln(h)},onMouseEnter:()=>o(l),children:u}),n(E,{get when(){return!s()},get children(){return n(Vn,{class:"nav-separator"})}})]}})}})}})},wo=Ee(()=>Te(()=>import("./Folder.12b951e8.js").then(e=>e.F),["assets/Folder.12b951e8.js","assets/Folder.b511ba9e.css","assets/index.c1cf46f4.js","assets/index.d81a3e4b.css","assets/useUtil.83019790.js","assets/api.4edf87d7.js","assets/Paginator.3a447579.js","assets/index.494311a6.js","assets/icon.6a6d3fc0.js","assets/index.ca51fd96.js","assets/LinkWithBase.c715b571.js"])),vo=Ee(()=>Te(()=>import("./File.0713b222.js").then(e=>e.a),["assets/File.0713b222.js","assets/index.c1cf46f4.js","assets/index.d81a3e4b.css","assets/useUtil.83019790.js","assets/api.4edf87d7.js","assets/icon.6a6d3fc0.js","assets/index.ca51fd96.js","assets/index.494311a6.js"])),yo=Ee(()=>Te(()=>import("./Password.d2bd4ace.js"),["assets/Password.d2bd4ace.js","assets/index.c1cf46f4.js","assets/index.d81a3e4b.css","assets/LinkWithBase.c715b571.js","assets/index.ca51fd96.js","assets/Markdown.5b34994b.js","assets/api.4edf87d7.js","assets/useUtil.83019790.js","assets/index.494311a6.js","assets/index.000f8da4.js","assets/FolderTree.5ea77610.js"]));let Ft=!0;const _o=()=>{const e=Ne("white","$neutral3"),{pathname:t}=j(),{handlePathChange:r}=H();let o=t();return tn(mt(t,a=>{Lr(),Ft||go(),Ft=!1,uo(o,window.scrollY),r(a),o=a})),n(ge,{class:"obj-box",w:"$full",rounded:"$xl",get bgColor(){return e()},p:"$2",shadow:"$lg",spacing:"$2",get children(){return n(pt,{get fallback(){return n(Le,{})},get children(){return n(Ue,{get children(){return[n(W,{get when(){return k.err},get children(){return n(zn,{get msg(){return k.err},disableColor:!0})}}),n(W,{get when(){return[x.FetchingObj,x.FetchingObjs].includes(k.state)},get children(){return n(Le,{})}}),n(W,{get when(){return k.state===x.NeedPassword},get children(){return n(yo,{})}}),n(W,{get when(){return[x.Folder,x.FetchingMore].includes(k.state)},get children(){return n(wo,{})}}),n(W,{get when(){return k.state===x.File},get children(){return n(vo,{})}})]}})}})}})},So=()=>{const e=Ne("white","$neutral3"),{proxyLink:t}=to(),{pathname:r}=j(),o=he(mt(()=>k.state,()=>{if(![x.FetchingMore,x.Folder,x.File].includes(k.state))return"";if([x.FetchingMore,x.Folder].includes(k.state)){const s=k.objs.find(l=>l.name.toLowerCase()==="readme.md");if(s)return t(s,!0)}return k.readme?k.readme:""})),a=async s=>{let l={content:s};return/^https?:\/\//g.test(s)&&(l=await Hr(s)),setTimeout(()=>{pn(r())}),l},[i]=Hn(o,a);return n(E,{get when(){return o()},get children(){return n(Ae,{w:"$full",rounded:"$xl",p:"$4",get bgColor(){return e()},shadow:"$lg",get children(){return n(Nn,{get loading(){return i.loading},get children(){return n(gn,{get children(){var s;return(s=i())==null?void 0:s.content}})}})}})}})},bn=e=>{const t=be("home_container");return n(Ue,{get fallback(){return n(Ae,{w:"min(99%, 980px)",get children(){return e.children}})},get children(){return n(W,{when:t==="hope_container",get children(){return n(Un,{get children(){return e.children}})}})}})},Co=()=>n(bn,{get children(){return n(ge,{class:"body",mt:"$1",py:"$2",px:"2%",minH:"80vh",w:"$full",gap:"$4",get children(){return[n(bo,{}),n(_o,{}),n(So,{})]}})}}),$o=()=>(O(),""),Rt={black:"#000",silver:"#C0C0C0",gray:"#808080",white:"#FFF",maroon:"#800000",red:"#F00",purple:"#800080",fuchsia:"#F0F",green:"#008000",lime:"#0F0",olive:"#808000",yellow:"#FF0",navy:"#000080",blue:"#00F",teal:"#008080",aqua:"#0FF",transparent:"#0000"},Se="^\\s*",Ce="\\s*$",se="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",le="([0-9A-Fa-f])",ce="([0-9A-Fa-f]{2})",xo=new RegExp(`${Se}rgb\\s*\\(${se},${se},${se}\\)${Ce}`),ko=new RegExp(`${Se}rgba\\s*\\(${se},${se},${se},${se}\\)${Ce}`),Oo=new RegExp(`${Se}#${le}${le}${le}${Ce}`),Mo=new RegExp(`${Se}#${ce}${ce}${ce}${Ce}`),Eo=new RegExp(`${Se}#${le}${le}${le}${le}${Ce}`),To=new RegExp(`${Se}#${ce}${ce}${ce}${ce}${Ce}`);function I(e){return parseInt(e,16)}function wn(e){try{let t;if(t=Mo.exec(e))return[I(t[1]),I(t[2]),I(t[3]),1];if(t=xo.exec(e))return[Q(t[1]),Q(t[5]),Q(t[9]),1];if(t=ko.exec(e))return[Q(t[1]),Q(t[5]),Q(t[9]),Ye(t[13])];if(t=Oo.exec(e))return[I(t[1]+t[1]),I(t[2]+t[2]),I(t[3]+t[3]),1];if(t=To.exec(e))return[I(t[1]),I(t[2]),I(t[3]),Ye(I(t[4])/255)];if(t=Eo.exec(e))return[I(t[1]+t[1]),I(t[2]+t[2]),I(t[3]+t[3]),Ye(I(t[4]+t[4])/255)];if(e in Rt)return wn(Rt[e]);throw new Error(`[seemly/rgba]: Invalid color value ${e}.`)}catch(t){throw t}}function Ao(e){return e>1?1:e<0?0:e}function jt(e,t,r,o){return`rgba(${Q(e)}, ${Q(t)}, ${Q(r)}, ${Ao(o)})`}function Dt(e,t){const[r,o,a,i=1]=Array.isArray(e)?e:wn(e);return t.alpha?jt(r,o,a,t.alpha):jt(r,o,a,i)}function Ye(e){const t=Math.round(Number(e)*100)/100;return t>1?1:t<0?0:t}function Q(e){const t=Math.round(Number(e));return t>255?255:t<0?0:t}const Po={list:mn,grid:dn,image:hn},Fo=()=>{const e=O();return n(vt,{get children(){return[n(bt,{as:qn,get color(){return ke()},get bgColor(){return Dt(ke(),{alpha:.15})},get _hover(){return{bgColor:Dt(ke(),{alpha:.2})}},"aria-label":"switch layout",compact:!0,size:"lg",get icon(){return n(Ue,{get children(){return[n(W,{get when(){return Qe()==="list"},get children(){return n(mn,{})}}),n(W,{get when(){return Qe()==="grid"},get children(){return n(dn,{})}}),n(W,{get when(){return Qe()==="image"},get children(){return n(hn,{})}})]}})}}),n(wt,{get children(){return n(_e,{get each(){return Object.entries(Po)},children:t=>n(ue,{get icon(){return n(nn,{get component(){return t[1]}})},onSelect:()=>{Wn(t[0])},get children(){return e(`home.layouts.${t[0]}`)}})})}})]}})},Ge=typeof window<"u"?window.navigator.userAgent:"";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Ge);/^((?!chrome|android).)*safari/i.test(Ge);/MicroMessenger/i.test(Ge);/MSIE|Trident/i.test(Ge);var Xt,Zt,Yt;const Ro=(Yt=(Zt=(Xt=window==null?void 0:window.navigator)==null?void 0:Xt.platform)!=null?Zt:"")==null?void 0:Yt.includes("Mac"),jo=()=>{const e=be("logo").split(`
`),t=Ne(e[0],e.pop());return n(rn,{class:"header",w:"$full",get children(){return n(bn,{get children(){return n(K,{px:"calc(2% + 0.5rem)",py:"$2",w:"$full",justifyContent:"space-between",get children(){return[n(K,{class:"header-left",h:"44px",get children(){return n(Kn,{get src(){return t()},h:"$full",w:"auto",get fallback(){return n(Gn,{})}})}}),n(K,{class:"header-right",spacing:"$2",get children(){return n(E,{get when(){return k.state===x.Folder},get children(){return[n(E,{get when(){return be("search_index")!=="none"},get children(){return n(K,{bg:"$neutral4",w:"$32",p:"$2",rounded:"$md",justifyContent:"space-between",border:"2px solid transparent",cursor:"pointer",_hover:{borderColor:"$info6"},onClick:()=>{w.emit("tool","search")},get children(){return[n(yt,{as:Vr}),n(K,{get children(){return[Ve(()=>Ro?n(Xe,{children:"Cmd"}):n(Xe,{children:"Ctrl"})),n(Xe,{children:"K"})]}})]}})}}),n(Fo,{})]}})}})]}})}})}})};function Do(e){return ie({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M9 11l3 3 8-8"/><path d="M20 12v6a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h9"/>'},e)}function Io(e){return ie({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><rect width="12" height="12" x="8" y="8" rx="2"/><path d="M16 8V6a2 2 0 00-2-2H6a2 2 0 00-2 2v8a2 2 0 002 2h2"/>'},e)}function xi(e){return ie({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M11 7H6a2 2 0 00-2 2v9a2 2 0 002 2h9a2 2 0 002-2v-5M10 14L20 4M15 4h5v5"/>'},e)}function Lo(e){return ie({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M14 3v4a1 1 0 001 1h4"/><path d="M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h7l5 5v11a2 2 0 01-2 2zM9 15h6"/><path d="M12.5 17.5L15 15l-2.5-2.5"/>'},e)}function Vo(e){return ie({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5 0 005 0l4-4a3.5 3.5 0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5 0 00-5 0l-4 4a3.5 3.5 0 005 5l.5-.5"/>'},e)}function Bo(e){return ie({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M11 8v6h1V8h2.5l-3-3-3 3zM1 3h1.5v1H1V3zM3 3h1.5v1H3V3zM5 3h1v1.5H5V3zM1 6.5h1V8H1V6.5zM2.5 7H4v1H2.5V7zM4.5 7H6v1H4.5V7zM1 4.5h1V6H1V4.5zM5 5h1v1.5H5V5zM5 11v3H2v-3h3zm1-1H1v5h5v-5z"/>'},e)}function ki(e){return ie({a:{viewBox:"0 0 16 16"},c:'<path fill="currentColor" d="M14 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zM2 6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1zm1.5 5.5A1.5 1.5 0 005 13v2c0 .55.45 1 1 1s1-.45 1-1v-2h2v2c0 .55.45 1 1 1s1-.45 1-1v-2a1.5 1.5 0 001.5-1.5V6h-9v5.5zM12.472 5a4.5 4.5 0 00-2.025-3.276l.5-1.001a.5.5 0 00-.895-.447L9.55 1.28l-.13-.052a4.504 4.504 0 00-2.84 0l-.13.052L5.948.276a.5.5 0 00-.895.447l.5 1.001A4.499 4.499 0 003.528 5v.5H12.5V5h-.028zM6.5 4a.5.5 0 01-.001-1h.002A.5.5 0 016.5 4zm3 0a.5.5 0 01-.001-1h.003a.5.5 0 01-.001 1z"/>'},e)}function zo(e){return ie({a:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},c:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>'},e)}const Z={rename:{icon:ro,color:"$accent9"},copy:{icon:Io,color:"$success9"},move:{icon:Lo,color:"$warning9"},delete:{icon:Jn,color:"$danger9"},copy_link:{icon:Vo,color:"$info9"},mkdir:{icon:oo,p:!0},recursive_move:{icon:Bo,p:!0},remove_empty_directory:{icon:zo,p:!0},batch_rename:{icon:ao,p:!0},new_file:{icon:io,p:!0},cancel_select:{icon:so},download:{icon:Qn,color:"$primary9"}},ze=e=>{const t=Xn.findIndex(o=>o===e.name);if(t!==-1&&!on.can(an(),t))return null;const r=O();return n(sn,{placement:"top",withArrow:!0,get label(){return r(`home.toolbar.${e.name}`)},get children(){return n(yt,we({get class(){return`toolbar-${e.name}`},get _hover(){return{bgColor:ft()}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$7",rounded:"$md",get p(){var o;return(o=Z[e.name])!=null&&o.p?"$1_5":"$1"},_active:{transform:"scale(.94)",transition:"0.2s"},get as(){var o;return(o=Z[e.name])==null?void 0:o.icon},get color(){var o;return(o=Z[e.name])==null?void 0:o.color}},e))}})},V=e=>{const t=O();return n(sn,{get disabled(){return!e.tips},placement:"left",withArrow:!0,get label(){return t(`home.toolbar.${e.tips}`)},get children(){return n(yt,we({get color(){return ke()},get _hover(){return{bgColor:ke(),color:"white"}},_focus:{outline:"none"},cursor:"pointer",boxSize:"$8",rounded:"$lg",p:"$1",_active:{transform:"scale(.94)",transition:"0.2s"},get as(){return e.icon}},e))}})},Ho=()=>{const e=O(),{copySelectedPreviewPage:t,copySelectedRawLink:r}=no(),o="neutral";return n(vt,{placement:"top",offset:10,get children(){return[n(bt,{as:ze,name:"copy_link"}),n(wt,{get children(){return[n(ue,{colorScheme:o,onSelect:()=>{t()},get children(){return e("home.toolbar.preview_page")}}),n(ue,{colorScheme:o,onSelect:()=>{r()},get children(){return e("home.toolbar.down_link")}}),n(ue,{colorScheme:o,onSelect:()=>{r(!0)},get children(){return e("home.toolbar.encode_down_link")}})]}})]}})},No=We("<p></p>"),Uo=()=>{const e=O(),t="neutral",{batchDownloadSelected:r,sendToAria2:o}=po();return n(vt,{placement:"top",offset:10,get children(){return[n(bt,{as:ze,name:"download"}),n(wt,{get children(){return[n(ue,{colorScheme:t,onSelect:r,get children(){return e("home.toolbar.batch_download")}}),n(E,{get when(){return on.is_admin(an())||Zn("package_download")},get children(){return n(ue,{colorScheme:t,onSelect:()=>{w.emit("tool","package_download")},get children(){return e("home.toolbar.package_download")}})}}),n(ue,{colorScheme:t,onSelect:o,get children(){return e("home.toolbar.send_aria2")}})]}})]}})},qo=Ee(()=>Te(()=>import("./PackageDownload.13d82e66.js"),["assets/PackageDownload.13d82e66.js","assets/index.c1cf46f4.js","assets/index.d81a3e4b.css","assets/api.4edf87d7.js","assets/useUtil.83019790.js"])),Wo=()=>{const e=O(),t=l=>{l==="package_download"&&o()};w.on("tool",t),P(()=>{w.off("tool",t)});const{isOpen:r,onOpen:o,onClose:a}=A(),[i,s]=q("pre_tips");return n(ae,{blockScrollOnMount:!1,get opened(){return r()},onClose:a,closeOnOverlayClick:!1,closeOnEsc:!1,get children(){return[n(ne,{}),n(re,{get children(){return[n(X,{get children(){return e("home.toolbar.package_download")}}),n(pt,{get fallback(){return n(Le,{})},get children(){return n(E,{get when(){return i()==="pre_tips"},get fallback(){return n(qo,{onClose:a})},get children(){return[n(oe,{get children(){const l=No.cloneNode(!0);return qe(l,()=>e("home.toolbar.pre_package_download-tips")),l}}),n(de,{display:"flex",gap:"$2",get children(){return[n(R,{onClick:a,colorScheme:"neutral",get children(){return e("global.cancel")}}),n(R,{colorScheme:"info",onClick:()=>{s("package_download")},get children(){return e("global.confirm")}})]}})]}})}})]}})]}})};function vn(e,t){e.indexOf(t)===-1&&e.push(t)}function Ko(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const yn=(e,t,r)=>Math.min(Math.max(r,e),t),N={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},Oe=e=>typeof e=="number",me=e=>Array.isArray(e)&&!Oe(e[0]),Go=(e,t,r)=>{const o=t-e;return((r-e)%o+o)%o+e};function Jo(e,t){return me(e)?e[Go(0,e.length,t)]:e}const _n=(e,t,r)=>-r*e+r*t+e,Sn=()=>{},ee=e=>e,St=(e,t,r)=>t-e===0?1:(r-e)/(t-e);function Cn(e,t){const r=e[e.length-1];for(let o=1;o<=t;o++){const a=St(0,t,o);e.push(_n(r,1,a))}}function Qo(e){const t=[0];return Cn(t,e-1),t}function Xo(e,t=Qo(e.length),r=ee){const o=e.length,a=o-t.length;return a>0&&Cn(t,a),i=>{let s=0;for(;s<o-2&&!(i<t[s+1]);s++);let l=yn(0,1,St(t[s],t[s+1],i));return l=Jo(r,s)(l),_n(e[s],e[s+1],l)}}const $n=e=>Array.isArray(e)&&Oe(e[0]),st=e=>typeof e=="object"&&Boolean(e.createAnimation),Me=e=>typeof e=="function",Zo=e=>typeof e=="string",et={ms:e=>e*1e3,s:e=>e/1e3},xn=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Yo=1e-7,ea=12;function ta(e,t,r,o,a){let i,s,l=0;do s=t+(r-t)/2,i=xn(s,o,a)-e,i>0?r=s:t=s;while(Math.abs(i)>Yo&&++l<ea);return s}function $e(e,t,r,o){if(e===t&&r===o)return ee;const a=i=>ta(i,0,1,e,r);return i=>i===0||i===1?i:xn(a(i),t,o)}const na=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const o=r*e,a=t==="end"?Math.floor(o):Math.ceil(o);return yn(0,1,a/e)},It={ease:$e(.25,.1,.25,1),"ease-in":$e(.42,0,1,1),"ease-in-out":$e(.42,0,.58,1),"ease-out":$e(0,0,.58,1)},ra=/\((.*?)\)/;function Lt(e){if(Me(e))return e;if($n(e))return $e(...e);if(It[e])return It[e];if(e.startsWith("steps")){const t=ra.exec(e);if(t){const r=t[1].split(",");return na(parseFloat(r[0]),r[1].trim())}}return ee}class oa{constructor(t,r=[0,1],{easing:o,duration:a=N.duration,delay:i=N.delay,endDelay:s=N.endDelay,repeat:l=N.repeat,offset:h,direction:u="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=ee,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((c,d)=>{this.resolve=c,this.reject=d}),o=o||N.easing,st(o)){const c=o.createAnimation(r);o=c.easing,r=c.keyframes||r,a=c.duration||a}this.repeat=l,this.easing=me(o)?ee:Lt(o),this.updateDuration(a);const g=Xo(r,h,me(o)?o.map(Lt):ee);this.tick=c=>{var d;i=i;let f=0;this.pauseTime!==void 0?f=this.pauseTime:f=(c-this.startTime)*this.rate,this.t=f,f/=1e3,f=Math.max(f-i,0),this.playState==="finished"&&this.pauseTime===void 0&&(f=this.totalDuration);const b=f/this.duration;let p=Math.floor(b),S=b%1;!S&&b>=1&&(S=1),S===1&&p--;const _=p%2;(u==="reverse"||u==="alternate"&&_||u==="alternate-reverse"&&!_)&&(S=1-S);const M=f>=this.totalDuration?1:Math.min(S,1),C=g(this.easing(M));t(C),this.pauseTime===void 0&&(this.playState==="finished"||f>=this.totalDuration+s)?(this.playState="finished",(d=this.resolve)===null||d===void 0||d.call(this,C)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(t=this.reject)===null||t===void 0||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){this.pauseTime!==void 0||this.rate===0?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}}class aa{setAnimation(t){this.animation=t,t==null||t.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const tt=new WeakMap;function kn(e){return tt.has(e)||tt.set(e,{transforms:[],values:new Map}),tt.get(e)}function ia(e,t){return e.has(t)||e.set(t,new aa),e.get(t)}const sa=["","X","Y","Z"],la=["translate","scale","rotate","skew"],ve={x:"translateX",y:"translateY",z:"translateZ"},Vt={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:e=>e+"deg"},ca={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:e=>e+"px"},rotate:Vt,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:ee},skew:Vt},ye=new Map,Je=e=>`--motion-${e}`,He=["x","y","z"];la.forEach(e=>{sa.forEach(t=>{He.push(e+t),ye.set(Je(e+t),ca[e])})});const ua=(e,t)=>He.indexOf(e)-He.indexOf(t),da=new Set(He),Ct=e=>da.has(e),ha=(e,t)=>{ve[t]&&(t=ve[t]);const{transforms:r}=kn(e);vn(r,t),e.style.transform=On(r)},On=e=>e.sort(ua).reduce(ga,"").trim(),ga=(e,t)=>`${e} ${t}(var(${Je(t)}))`,lt=e=>e.startsWith("--"),Bt=new Set;function fa(e){if(!Bt.has(e)){Bt.add(e);try{const{syntax:t,initialValue:r}=ye.has(e)?ye.get(e):{};CSS.registerProperty({name:e,inherits:!1,syntax:t,initialValue:r})}catch{}}}const nt=(e,t)=>document.createElement("div").animate(e,t),zt={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{nt({opacity:[1]})}catch{return!1}return!0},finished:()=>Boolean(nt({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{nt({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},rt={},fe={};for(const e in zt)fe[e]=()=>(rt[e]===void 0&&(rt[e]=zt[e]()),rt[e]);const ma=.015,pa=(e,t)=>{let r="";const o=Math.round(t/ma);for(let a=0;a<o;a++)r+=e(St(0,o-1,a))+", ";return r.substring(0,r.length-2)},Ht=(e,t)=>Me(e)?fe.linearEasing()?`linear(${pa(e,t)})`:N.easing:$n(e)?ba(e):e,ba=([e,t,r,o])=>`cubic-bezier(${e}, ${t}, ${r}, ${o})`;function wa(e,t){for(let r=0;r<e.length;r++)e[r]===null&&(e[r]=r?e[r-1]:t());return e}const va=e=>Array.isArray(e)?e:[e];function ct(e){return ve[e]&&(e=ve[e]),Ct(e)?Je(e):e}const xe={get:(e,t)=>{t=ct(t);let r=lt(t)?e.style.getPropertyValue(t):getComputedStyle(e)[t];if(!r&&r!==0){const o=ye.get(t);o&&(r=o.initialValue)}return r},set:(e,t,r)=>{t=ct(t),lt(t)?e.style.setProperty(t,r):e.style[t]=r}};function ya(e,t=!0){if(!(!e||e.playState==="finished"))try{e.stop?e.stop():(t&&e.commitStyles(),e.cancel())}catch{}}function _a(e,t){var r;let o=(t==null?void 0:t.toDefaultUnit)||ee;const a=e[e.length-1];if(Zo(a)){const i=((r=a.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";i&&(o=s=>s+i)}return o}function Sa(){return window.__MOTION_DEV_TOOLS_RECORD}function Ca(e,t,r,o={},a){const i=Sa(),s=o.record!==!1&&i;let l,{duration:h=N.duration,delay:u=N.delay,endDelay:g=N.endDelay,repeat:c=N.repeat,easing:d=N.easing,direction:f,offset:b,allowWebkitAcceleration:p=!1}=o;const S=kn(e),_=Ct(t);let M=fe.waapi();_&&ha(e,t);const C=ct(t),$=ia(S.values,C),D=ye.get(C);return ya($.animation,!(st(d)&&$.generator)&&o.record!==!1),()=>{const U=()=>{var v,F;return(F=(v=xe.get(e,C))!==null&&v!==void 0?v:D==null?void 0:D.initialValue)!==null&&F!==void 0?F:0};let m=wa(va(r),U);const y=_a(m,D);if(st(d)){const v=d.createAnimation(m,t!=="opacity",U,C,$);d=v.easing,m=v.keyframes||m,h=v.duration||h}if(lt(C)&&(fe.cssRegisterProperty()?fa(C):M=!1),_&&!fe.linearEasing()&&(Me(d)||me(d)&&d.some(Me))&&(M=!1),M){D&&(m=m.map(L=>Oe(L)?D.toDefaultUnit(L):L)),m.length===1&&(!fe.partialKeyframes()||s)&&m.unshift(U());const v={delay:et.ms(u),duration:et.ms(h),endDelay:et.ms(g),easing:me(d)?void 0:Ht(d,h),direction:f,iterations:c+1,fill:"both"};l=e.animate({[C]:m,offset:b,easing:me(d)?d.map(L=>Ht(L,h)):void 0},v),l.finished||(l.finished=new Promise((L,Pe)=>{l.onfinish=L,l.oncancel=Pe}));const F=m[m.length-1];l.finished.then(()=>{xe.set(e,C,F),l.cancel()}).catch(Sn),p||(l.playbackRate=1.000001)}else if(a&&_)m=m.map(v=>typeof v=="string"?parseFloat(v):v),m.length===1&&m.unshift(parseFloat(U())),l=new a(v=>{xe.set(e,C,y?y(v):v)},m,Object.assign(Object.assign({},o),{duration:h,easing:d}));else{const v=m[m.length-1];xe.set(e,C,D&&Oe(v)?D.toDefaultUnit(v):v)}return s&&i(e,t,m,{duration:h,delay:u,easing:d,repeat:c,offset:b},"motion-one"),$.setAnimation(l),l}}const $a=(e,t)=>e[t]?Object.assign(Object.assign({},e),e[t]):Object.assign({},e);function xa(e,t){var r;return typeof e=="string"?t?((r=t[e])!==null&&r!==void 0||(t[e]=document.querySelectorAll(e)),e=t[e]):e=document.querySelectorAll(e):e instanceof Element&&(e=[e]),Array.from(e||[])}function Mn(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(r[o[a]]=e[o[a]]);return r}const ka={any:0,all:1};function Oa(e,t,{root:r,margin:o,amount:a="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const i=xa(e),s=new WeakMap,l=u=>{u.forEach(g=>{const c=s.get(g.target);if(g.isIntersecting!==Boolean(c))if(g.isIntersecting){const d=t(g);Me(d)?s.set(g.target,d):h.unobserve(g.target)}else c&&(c(g),s.delete(g.target))})},h=new IntersectionObserver(l,{root:r,rootMargin:o,threshold:typeof a=="number"?a:ka[a]});return i.forEach(u=>h.observe(u)),()=>h.disconnect()}function Ma(e,t){return typeof e!=typeof t?!0:Array.isArray(e)&&Array.isArray(t)?!Ea(e,t):e!==t}function Ea(e,t){const r=t.length;if(r!==e.length)return!1;for(let o=0;o<r;o++)if(t[o]!==e[o])return!1;return!0}function Ta(e){return typeof e=="object"}function Nt(e,t){if(Ta(e))return e;if(e&&t)return t[e]}let te;function Aa(){if(!te)return;const e=te.sort(Fa).map(Ra);e.forEach(Ut),e.forEach(Ut),te=void 0}function ot(e){te?vn(te,e):(te=[e],requestAnimationFrame(Aa))}function Pa(e){te&&Ko(te,e)}const Fa=(e,t)=>e.getDepth()-t.getDepth(),Ra=e=>e.animateUpdates(),Ut=e=>e.next(),qt=(e,t)=>new CustomEvent(e,{detail:{target:t}});function ut(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEvent:r}}))}function Wt(e,t,r){e.dispatchEvent(new CustomEvent(t,{detail:{originalEntry:r}}))}const ja={isActive:e=>Boolean(e.inView),subscribe:(e,{enable:t,disable:r},{inViewOptions:o={}})=>{const{once:a}=o,i=Mn(o,["once"]);return Oa(e,s=>{if(t(),Wt(e,"viewenter",s),!a)return l=>{r(),Wt(e,"viewleave",l)}},i)}},Kt=(e,t,r)=>o=>{o.pointerType&&o.pointerType!=="mouse"||(r(),ut(e,t,o))},Da={isActive:e=>Boolean(e.hover),subscribe:(e,{enable:t,disable:r})=>{const o=Kt(e,"hoverstart",t),a=Kt(e,"hoverend",r);return e.addEventListener("pointerenter",o),e.addEventListener("pointerleave",a),()=>{e.removeEventListener("pointerenter",o),e.removeEventListener("pointerleave",a)}}},Ia={isActive:e=>Boolean(e.press),subscribe:(e,{enable:t,disable:r})=>{const o=i=>{r(),ut(e,"pressend",i),window.removeEventListener("pointerup",o)},a=i=>{t(),ut(e,"pressstart",i),window.addEventListener("pointerup",o)};return e.addEventListener("pointerdown",a),()=>{e.removeEventListener("pointerdown",a),window.removeEventListener("pointerup",o)}}},je={inView:ja,hover:Da,press:Ia},Gt=["initial","animate",...Object.keys(je),"exit"],dt=new WeakMap;function La(e={},t){let r,o=t?t.getDepth()+1:0;const a={initial:!0,animate:!0},i={},s={};for(const p of Gt)s[p]=typeof e[p]=="string"?e[p]:t==null?void 0:t.getContext()[p];const l=e.initial===!1?"animate":"initial";let h=Nt(e[l]||s[l],e.variants)||{},u=Mn(h,["transition"]);const g=Object.assign({},u);function*c(){var p,S;const _=u;u={};const M={};for(const m of Gt){if(!a[m])continue;const y=Nt(e[m]);if(!!y)for(const v in y)v!=="transition"&&(u[v]=y[v],M[v]=$a((S=(p=y.transition)!==null&&p!==void 0?p:e.transition)!==null&&S!==void 0?S:{},v))}const C=new Set([...Object.keys(u),...Object.keys(_)]),$=[];C.forEach(m=>{var y;u[m]===void 0&&(u[m]=g[m]),Ma(_[m],u[m])&&((y=g[m])!==null&&y!==void 0||(g[m]=xe.get(r,m)),$.push(Ca(r,m,u[m],M[m],oa)))}),yield;const D=$.map(m=>m()).filter(Boolean);if(!D.length)return;const U=u;r.dispatchEvent(qt("motionstart",U)),Promise.all(D.map(m=>m.finished)).then(()=>{r.dispatchEvent(qt("motioncomplete",U))}).catch(Sn)}const d=(p,S)=>()=>{a[p]=S,ot(b)},f=()=>{for(const p in je){const S=je[p].isActive(e),_=i[p];S&&!_?i[p]=je[p].subscribe(r,{enable:d(p,!0),disable:d(p,!1)},e):!S&&_&&(_(),delete i[p])}},b={update:p=>{!r||(e=p,f(),ot(b))},setActive:(p,S)=>{!r||(a[p]=S,ot(b))},animateUpdates:c,getDepth:()=>o,getTarget:()=>u,getOptions:()=>e,getContext:()=>s,mount:p=>(r=p,dt.set(r,b),f(),()=>{dt.delete(r),Pa(b);for(const S in i)i[S]()}),isMounted:()=>Boolean(r)};return b}function Va(e){const t={},r=[];for(let o in e){const a=e[o];Ct(o)&&(ve[o]&&(o=ve[o]),r.push(o),o=Je(o));let i=Array.isArray(a)?a[0]:a;const s=ye.get(o);s&&(i=Oe(a)?s.toDefaultUnit(a):a),t[o]=i}return r.length&&(t.transform=On(r)),t}const Ba={initial:()=>!0,addCleanup:P,addMount:cn},ht=ln(),En=ln(Ba);function za(e,t,r,o){const{addCleanup:a,addMount:i,initial:s}=r,l=La(s()?t():{...t(),initial:!1},o);return i(Yn.bind(void 0,er(),()=>{a(l.mount(e())),tn(()=>l.update(t()))})),l}const Ha=/([^:; ]*):\s*([^;]*)/g;function Jt(e){const t={};let r;for(;r=Ha.exec(e);)t[r[1]]=r[2];return t}function Na(e,t){if(typeof e=="object"&&typeof t=="object")return{...e,...t};if(typeof e=="string"&&typeof t=="string")return`${e};${t}`;const r=typeof e=="object"?e:Jt(e),o=typeof t=="object"?t:Jt(t);return{...r,...o}}const Qt=e=>{const[t,,r]=tr(e,["initial","animate","inView","inViewOptions","hover","press","variants","transition","exit"],["tag","ref","style","onMotionStart","onMotionComplete","onHoverStart","onHoverEnd","onPressStart","onPressEnd","onViewEnter","onViewLeave"]),o=za(()=>i,()=>({...t}),Ot(En),Ot(ht)),a=Va(o.getTarget());let i;return n(ht.Provider,{value:o,get children(){return n(nn,we({ref:s=>{var l;i=s,(l=e.ref)==null||l.call(e,s)},get component(){return un(()=>e.tag||"div")},get style(){return Ve(()=>!!e.style,!0)()?Na(e.style,a):a},get["on:motionstart"](){return e.onMotionStart},get["on:motioncomplete"](){return e.onMotionComplete},get["on:hoverstart"](){return e.onHoverStart},get["on:hoverend"](){return e.onHoverEnd},get["on:pressstart"](){return e.onPressStart},get["on:pressend"](){return e.onPressEnd},get["on:viewenter"](){return e.onViewEnter},get["on:viewleave"](){return e.onViewLeave}},r))}})},$t=new Proxy(Qt,{get:(e,t)=>r=>(delete r.tag,n(Qt,we(r,{tag:t})))}),Ua=e=>(e=Array.isArray(e)?e[0]:e,e instanceof Element?e:void 0),qa=(e,t)=>{const r={once:!0};e.addEventListener("motioncomplete",t,r),P(e.removeEventListener.bind(e,"motioncomplete",t,r))},Wa=e=>{let{initial:t=!0}=e;cn(()=>t=!0);let r=!1,o=[],a=[],i=[];return P(()=>{i.concat(a).forEach(s=>s()),a=i=o=[]}),n(En.Provider,{value:{addCleanup:s=>a.push(s),addMount:s=>o.push(s),initial:()=>t},get children(){return n(ht.Provider,{value:void 0,get children(){return un(()=>{const s=nr(()=>e.children),l=he(()=>Ua(s())),[h,u]=q(),[g,c]=q();return rr(mt(l,b=>{i.push(...a),a=[],or(()=>{e.exitBeforeEnter?(u(),f(()=>!r&&d(b))):(d(b),f())})})),[h,g];function d(b){u(b),o.forEach(p=>p()),o=[]}function f(b){var M;const p=()=>{c(),i.forEach(C=>C()),i=[],b==null||b()},S=c((M=h())!=null?M:g());if(!S)return p();const _=dt.get(S);if(!_||!_.getOptions().exit)return p();_.setActive("exit",r=!0),qa(S,()=>{r=!1,p()})}})}})}})},Ka=()=>{const e=he(()=>[x.Folder,x.FetchingMore].includes(k.state)&&ar()&&ir());return n(Wa,{exitBeforeEnter:!0,get children(){return n(E,{get when(){return e()},get children(){return n(Ae,{class:"center-toolbar",pos:"fixed",bottom:"$4",right:"50%",w:"max-content",color:"$neutral11",get as(){return $t.div},initial:{opacity:0,scale:.9,x:"50% ",y:10},animate:{opacity:1,scale:1,x:"50%",y:0},exit:{opacity:0,scale:.9},transition:{duration:.2},get children(){return n(K,{p:"$2",get bgColor(){return Ne("white","#000000d0")()},spacing:"$1",shadow:"0px 10px 30px -5px rgba(0, 0, 0, 0.3)",rounded:"$lg",css:{backdropFilter:"blur(8px)"},get children(){return[n(_e,{each:["rename","move","copy","delete"],children:t=>n(ze,{name:t,onClick:()=>{w.emit("tool",t)}})}),n(Ho,{}),n(Uo,{}),n(ze,{name:"cancel_select",onClick:()=>{sr(!1)}})]}})}})}})}})},Ga=()=>{const{isOpen:e,onToggle:t}=A({defaultIsOpen:localStorage.getItem("more-open")==="true",onClose:()=>localStorage.setItem("more-open","false"),onOpen:()=>localStorage.setItem("more-open","true")}),r=he(()=>e()?"$4":"$5"),o=he(()=>k.state===x.Folder),{refresh:a}=H();return n(Ae,{class:"left-toolbar-box",pos:"fixed",get right(){return r()},get bottom(){return r()},get children(){return n(E,{get when(){return e()},get fallback(){return n(V,{class:"toolbar-toggle",as:At,onClick:()=>{t()}})},get children(){return n(ge,{class:"left-toolbar",p:"$1",rounded:"$lg",spacing:"$1",bgColor:"$neutral1",get as(){return $t.div},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{duration:.2},get children(){return[n(ge,{spacing:"$1",class:"left-toolbar-in",get children(){return[n(E,{get when(){return Ve(()=>!!o(),!0)()&&(Mt("write")||k.write)},get children(){return[n(V,{as:lo,tips:"refresh",onClick:()=>{a(void 0,!0)}}),n(V,{get as(){return Z.new_file.icon},tips:"new_file",onClick:()=>{w.emit("tool","new_file")}}),n(V,{get as(){return Z.mkdir.icon},p:"$1_5",tips:"mkdir",onClick:()=>{w.emit("tool","mkdir")}}),n(V,{get as(){return Z.recursive_move.icon},tips:"recursive_move",onClick:()=>{w.emit("tool","recursiveMove")}}),n(V,{get as(){return Z.remove_empty_directory.icon},tips:"remove_empty_directory",onClick:()=>{w.emit("tool","removeEmptyDirectory")}}),n(V,{get as(){return Z.batch_rename.icon},tips:"batch_rename",onClick:()=>{w.emit("tool","batchRename")}}),n(V,{as:lr,tips:"upload",onClick:()=>{w.emit("tool","upload")}})]}}),n(E,{get when(){return Ve(()=>!!o(),!0)()&&Mt("offline_download")},get children(){return n(V,{as:cr,pl:"0",tips:"offline_download",onClick:()=>{w.emit("tool","offline_download")}})}}),n(V,{tips:"toggle_checkbox",as:Do,onClick:ur}),n(V,{as:dr,tips:"local_settings",onClick:()=>{w.emit("tool","local_settings")}})]}}),n(V,{tips:"more",as:At,onClick:t})]}})}})}})},Ja=()=>{const{isOpen:e,onOpen:t,onClose:r}=A(),[o,a]=z(Nr),{pathname:i}=j(),{refresh:s}=H(),l=h=>{h==="copy"&&t()};return w.on("tool",l),P(()=>{w.off("tool",l)}),n(_t,{get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async h=>{const u=await a(i(),h,pe().map(g=>g.name));G(u,()=>{s(),r()})}})},Qa=()=>{const{isOpen:e,onOpen:t,onClose:r}=A(),[o,a]=z(Ur),{pathname:i}=j(),{refresh:s}=H(),l=h=>{h==="move"&&t()};return w.on("tool",l),P(()=>{w.off("tool",l)}),n(_t,{get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async h=>{const u=await a(i(),h,pe().map(g=>g.name));G(u,()=>{s(),r()})}})},Xa=We("<p></p>"),Za=()=>{const e=O(),{isOpen:t,onOpen:r,onClose:o}=A(),[a,i]=z(qr),{refresh:s}=H(),{pathname:l}=j(),h=u=>{u==="delete"&&r()};return w.on("tool",h),P(()=>{w.off("tool",h)}),n(ae,{blockScrollOnMount:!1,get opened(){return t()},onClose:o,size:{"@initial":"xs","@md":"md"},get children(){return[n(ne,{}),n(re,{get children(){return[n(X,{get children(){return e("home.toolbar.delete")}}),n(oe,{get children(){const u=Xa.cloneNode(!0);return qe(u,()=>e("home.toolbar.delete-tips")),u}}),n(de,{display:"flex",gap:"$2",get children(){return[n(R,{onClick:o,colorScheme:"neutral",get children(){return e("global.cancel")}}),n(R,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const u=await i(l(),pe().map(g=>g.name));G(u,()=>{s(),o()})},get children(){return e("global.confirm")}})]}})]}})]}})},Ya=()=>{const{isOpen:e,onOpen:t,onClose:r}=A(),o=O(),[a,i]=z(Wr),{pathname:s}=j(),{refresh:l}=H(),h=u=>{if(u==="rename"){if(!hr()){B.warning(o("home.toolbar.only_one-tips"));return}t()}};return w.on("tool",h),P(()=>{w.off("tool",h)}),n(E,{get when(){return e()},get children(){return n(Ke,{title:"home.toolbar.input_new_name",get opened(){return e()},onClose:r,get defaultValue(){var u,g;return(g=(u=pe()[0])==null?void 0:u.name)!=null?g:""},get loading(){return a()},onSubmit:async u=>{const g=await i(Y(s(),pe()[0].name),u);G(g,()=>{l(),r()})}})}})},ei=()=>{const{isOpen:e,onOpen:t,onClose:r}=A(),[o,a]=z(Kr),{refresh:i}=H(),{pathname:s}=j(),l=h=>{h==="new_file"&&t()};return w.on("tool",l),P(()=>{w.off("tool",l)}),n(Ke,{title:"home.toolbar.input_filename",get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async h=>{const u=await a(Y(s(),h),De());G(u,()=>{i(),r()})}})},ti=()=>{const{isOpen:e,onOpen:t,onClose:r}=A(),[o,a]=z(Gr),{pathname:i}=j(),{refresh:s}=H(),l=h=>{h==="mkdir"&&t()};return w.on("tool",l),P(()=>{w.off("tool",l)}),n(Ke,{title:"home.toolbar.input_dir_name",get opened(){return e()},onClose:r,get loading(){return o()},onSubmit:async h=>{const u=await a(Y(i(),h));G(u,()=>{s(),r()})}})},ni=We("<p></p>"),ri=()=>{const{isOpen:e,onOpen:t,onClose:r}=A(),{isOpen:o,onOpen:a,onClose:i}=A(),[s,l]=z(Jr),{pathname:h}=j(),{refresh:u}=H(),g=d=>{d==="recursiveMove"&&t()};w.on("tool",g),P(()=>{w.off("tool",g)});const c=O();return[n(ae,{blockScrollOnMount:!1,get opened(){return e()},onClose:()=>r(),size:{"@initial":"xs","@md":"md"},get children(){return[n(ne,{}),n(re,{get children(){return[n(X,{get children(){return c("home.toolbar.recursive_move")}}),n(oe,{get children(){const d=ni.cloneNode(!0);return qe(d,()=>c("home.toolbar.recursive_move_directory-tips")),d}}),n(de,{display:"flex",gap:"$2",get children(){return[n(R,{onClick:()=>r(),colorScheme:"neutral",get children(){return c("global.cancel")}}),n(R,{onClick:()=>{r(),a()},colorScheme:"danger",get children(){return c("global.confirm")}})]}})]}})]}}),n(_t,{get opened(){return o()},onClose:i,get loading(){return s()},onSubmit:async d=>{const f=await l(h(),d);G(f,()=>{u(),i()})}})]},oi=We("<p></p>"),ai=()=>{const{isOpen:e,onOpen:t,onClose:r}=A(),{pathname:o}=j(),[a,i]=z(Qr),{refresh:s}=H(),l=u=>{u==="removeEmptyDirectory"&&t()};w.on("tool",l),P(()=>{w.off("tool",l)});const h=O();return n(ae,{blockScrollOnMount:!1,get opened(){return e()},onClose:r,size:{"@initial":"xs","@md":"md"},get children(){return[n(ne,{}),n(re,{get children(){return[n(X,{get children(){return h("home.toolbar.remove_empty_directory")}}),n(oe,{get children(){const u=oi.cloneNode(!0);return qe(u,()=>h("home.toolbar.remove_empty_directory-tips")),u}}),n(de,{display:"flex",gap:"$2",get children(){return[n(R,{onClick:r,colorScheme:"neutral",get children(){return h("global.cancel")}}),n(R,{colorScheme:"danger",get loading(){return a()},onClick:async()=>{const u=await i(o());G(u,()=>{s(),r()})},get children(){return h("global.confirm")}})]}})]}})]}})},ii=e=>n($t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2},style:{width:"100%"},get children(){return n(K,{class:"list-item",w:"$full",p:"$2",rounded:"$lg",transition:"all 0.3s",get _hover(){return{transform:"scale(1.01)",bgColor:ft()}},get children(){return[n(Be,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.src_name},get children(){return e.obj.src_name}}),n(Be,{w:{"@initial":"50%","@md":"50%"},class:"name",css:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},get title(){return e.obj.new_name},get children(){return e.obj.new_name}})]}})}}),si=()=>{const{isOpen:e,onOpen:t,onClose:r}=A(),{isOpen:o,onOpen:a,onClose:i}=A(),[s,l]=z(Xr),{pathname:h}=j(),{refresh:u}=H(),[g,c]=q("1"),[d,f]=q(""),[b,p]=q(""),[S,_]=q("string"),[M,C]=q([]),$=O(),D=()=>({fontWeight:"bold",fontSize:"$sm",color:"$neutral11",textAlign:"left",cursor:"pointer"}),U=y=>{y==="batchRename"&&a()};w.on("tool",U),P(()=>{w.off("tool",U)});const m=()=>{if(!d()||!b()){B.warning($("global.empty_input"));return}const y=new RegExp(d(),"g");let v;if(g()==="1")v=k.objs.filter(F=>F.name.match(d())).map(F=>({src_name:F.name,new_name:F.name.replace(y,b())}));else{let F=b();v=k.objs.map(L=>{let Pe="";const xt=L.name.lastIndexOf(".");xt!==-1&&(Pe=L.name.substring(xt+1));const Tn={src_name:L.name,new_name:d()+F+"."+Pe};return F=(parseInt(F)+1).toString().padStart(F.length,"0"),Tn})}C(v),t(),i()};return[n(ae,{blockScrollOnMount:!1,get opened(){return o()},onClose:i,initialFocus:"#modal-input1",size:{"@initial":"xs","@md":"md"},get children(){return[n(ne,{}),n(re,{get children(){return[n(E,{get when(){return g()==="1"},get children(){return n(X,{get children(){return $("home.toolbar.regular_rename")}})}}),n(E,{get when(){return g()==="2"},get children(){return n(X,{get children(){return $("home.toolbar.sequential_renaming_desc")}})}}),n(oe,{get children(){return[n(gr,{defaultValue:"1",style:{margin:"20px 0"},onChange:y=>{c(y),y==="1"?_("string"):y==="2"&&_("number")},get children(){return n(K,{spacing:"$4",get children(){return[n(Et,{value:"1",get children(){return $("home.toolbar.regex_rename")}}),n(Et,{value:"2",get children(){return $("home.toolbar.sequential_renaming")}})]}})}}),n(ge,{spacing:"$2",get children(){return[n(Ie,{id:"modal-input1",type:"string",get value(){return d()},onInput:y=>{f(y.currentTarget.value)},onKeyDown:y=>{y.key==="Enter"&&m()}}),n(Ie,{id:"modal-input2",get type(){return S()},get value(){return b()},onInput:y=>{p(y.currentTarget.value)},onKeyDown:y=>{y.key==="Enter"&&m()}})]}})]}}),n(de,{display:"flex",gap:"$2",get children(){return[n(R,{onClick:()=>{c("1"),_("string"),i()},colorScheme:"neutral",get children(){return $("global.cancel")}}),n(R,{onClick:()=>m(),get disabled(){return!d()||!b()},get children(){return $("global.ok")}})]}})]}})]}}),n(ae,{size:"xl",get opened(){return e()},onClose:r,get children(){return[n(ne,{}),n(re,{get children(){return[n(X,{get children(){return $("home.toolbar.regex_rename_preview")}}),n(oe,{get children(){return n(ge,{class:"list",w:"$full",spacing:"$1",get children(){return[n(K,{class:"title",w:"$full",p:"$2",get children(){return[n(Be,we({w:{"@initial":"50%","@md":"50%"}},D,{get children(){return $("home.toolbar.regex_rename_preview_old_name")}})),n(Be,we({w:{"@initial":"50%","@md":"50%"}},D,{get children(){return $("home.toolbar.regex_rename_preview_new_name")}}))]}}),n(_e,{get each(){return M()},children:(y,v)=>n(ii,{obj:y,get index(){return v()}})})]}})}}),n(de,{display:"flex",gap:"$2",get children(){return[n(R,{onClick:()=>{C([]),c("1"),_("string"),r(),i()},colorScheme:"neutral",get children(){return $("global.cancel")}}),n(R,{onClick:()=>{C([]),r(),a()},colorScheme:"neutral",get children(){return $("global.back")}}),n(R,{get loading(){return s()},onClick:async()=>{const y=await l(h(),M());G(y,()=>{C([]),f(""),p(""),c("1"),_("string"),u(),i(),r()})},get disabled(){return M().length==0},get children(){return $("global.ok")}})]}})]}})]}})]},li=()=>{const e=O(),[t,r]=q("aria2"),{isOpen:o,onOpen:a,onClose:i}=A(),[s,l]=z(Zr),{pathname:h}=j(),u=g=>{g==="offline_download"&&a()};return w.on("tool",u),P(()=>{w.off("tool",u)}),n(Ke,{title:"home.toolbar.offline_download",type:"text",get opened(){return o()},onClose:i,get loading(){return s()},get tips(){return e("home.toolbar.offline_download-tips")},get topSlot(){return n(Ae,{mb:"$2",get children(){return n(fr,{get value(){return t()},onChange:g=>r(g),options:[{value:"aria2",label:"Aria2"},{value:"qbit",label:"qBittorrent"}]})}})},onSubmit:async g=>{const c=await l(h(),g.split(`
`),t());G(c,()=>{i()})}})},ci=e=>{const t=O(),r=s=>{s===e.name&&a()};w.on("tool",r),P(()=>{w.off("tool",r)});const{isOpen:o,onOpen:a,onClose:i}=A();return n(ae,{get blockScrollOnMount(){return e.blockScrollOnMount},get opened(){return o()},onClose:i,closeOnOverlayClick:!1,closeOnEsc:!1,size:{"@initial":"xs","@md":"md","@lg":"lg","@xl":"xl","@2xl":"2xl"},get children(){return[n(ne,{}),n(re,{get children(){return[n(mr,{}),n(X,{get children(){return t(e.title)}}),n(oe,{get children(){return n(E,{get when(){return o()},get children(){return n(pt,{get fallback(){return n(Le,{})},get children(){return e.children}})}})}})]}})]}})};function ui(e){const t=O();return n(Dr,{get children(){return[n(xr,{get children(){return t(`home.local_settings.${e.key}`)}}),n(Ue,{get fallback(){return n(Ie,{get value(){return at[e.key]},onInput:r=>{Tt(e.key,r.currentTarget.value)}})},get children(){return n(W,{get when(){return e.type==="select"},get children(){return n(kr,{get id(){return e.key},get defaultValue(){return at[e.key]},onChange:r=>Tt(e.key,r),get children(){return[n(Or,{get children(){return[n(Mr,{get children(){return t("global.choose")}}),n(Er,{}),n(Tr,{})]}}),n(Ar,{get children(){return n(Pr,{get children(){return n(_e,{get each(){return e.options},children:r=>n(Fr,{value:r,get children(){return[n(Rr,{get children(){return t(`home.local_settings.${e.key}_options.${r}`)}}),n(jr,{})]}})})}})}})]}})}})}})]}})}const di=()=>{const{isOpen:e,onOpen:t,onClose:r}=A(),o=O(),a=i=>{i==="local_settings"&&t()};return w.on("tool",a),P(()=>{w.off("tool",a)}),n($r,{get opened(){return e()},placement:"right",onClose:r,get children(){return[n(pr,{}),n(br,{get children(){return[n(wr,{}),n(vr,{color:"$info9",get children(){return o("home.toolbar.local_settings")}}),n(yr,{get children(){return[n(ge,{spacing:"$2",get children(){return n(_e,{each:_r,children:i=>n(ui,i)})}}),n(rn,{mt:"$4",get children(){return n(K,{spacing:"$4",p:"$2",color:"$neutral11",get children(){return[n(Sr,{}),n(Cr,{})]}})}})]}})]}})]}})},hi=Ee(()=>Te(()=>import("./Upload.6975fb1d.js"),["assets/Upload.6975fb1d.js","assets/index.c1cf46f4.js","assets/index.d81a3e4b.css","assets/index.000f8da4.js"])),gi=()=>[n(Ja,{}),n(Qa,{}),n(Ya,{}),n(Za,{}),n(ei,{}),n(ti,{}),n(ri,{}),n(ai,{}),n(si,{}),n(li,{}),n(Wo,{}),n(ci,{name:"upload",title:"home.toolbar.upload",get children(){return n(hi,{})}}),n(di,{})],fi=()=>n(Ir,{get children(){return[n(Ga,{}),n(Ka,{}),n(gi,{})]}}),mi=()=>{Br(be("site_title"));const e=be("announcement");return e&&B.render(()=>n(gn,{children:e})),[n(jo,{}),n(fi,{}),n(Co,{}),n($o,{})]},Oi=Object.freeze(Object.defineProperty({__proto__:null,default:mi},Symbol.toStringTag,{value:"Module"}));export{ki as I,Oi as L,$t as M,xi as T,H as a,ho as b,$i as g,Ro as i,Z as o,po as u};
